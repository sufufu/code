## 事件

事件：文档（document、html 元素）发生的特定交互的瞬间。可以通过监听这些事件，来达到事件触发时做出相应的操作的目的

```javascript
// 键盘事件
// onkeydown 键盘按下事件
// onkeyup 按键弹起事件
// onkeypress 按键事件（有兼容性问题）
// input、textarea、document、documentElement、document.body、window 需要绑定键盘事件，其他标签如div、p、a... 一般不需键盘事件

// 表单元素事件：input、textarea、select、checkbox、radio
// onfocus 获得焦点时触发：得焦事件
// onblur 失去焦点时触发：失焦事件
// oninput 输入事件：输入时触发
// onchange 表单的值发生改变时触发

// 系统事件；
// window.onload 页面中所有的资源全部加载完成后触发
// window.onresize 浏览器窗口的尺寸发生改变时触发
// window.onscroll 浏览器窗口滚动条滚动的时候触发
window.onload = function () {
  console.log('页面资源加载完成');
};
window.onresize = function () {
  console.log('尺寸变了');
};


// 移动端事件：
// ontouchstart: 触摸屏幕元素时触发
// ontouchend 手指离开屏幕时触发
// ontouchmove 手指滑动的时候触发
// 某些特殊的能力：如华为手机指关节敲击屏幕、ios 3D-Touch 这种特殊能力要看操作系统是否给了浏览器，还要看浏览器的开发商是否开发响应的功能去调用操作系统的能力；

box.ontouchstart = function () {
  console.log('start');
};
box.ontouchend = function () {
  console.log('end');
};
box.ontouchmove = function () {
  console.log('move');
};
// 移动端使用 onclick 事件会有 300ms 的延迟

// 事件函数都是在事件触发时，浏览器执行的。我们给元素的事件属性赋值一个函数，这个行为叫做监听事件。

```

## 事件对象

事件触发时，浏览器执行事件函数时传入一个实参，是一个对象，一般常见的有鼠标事件对象、键盘事件对象、这个对象中保存了事件触发时的信息

## 事件的默认行为

如 a 标签，我们不需要做额外的处理，点击 a 标签就可以跳转到 href 指向的链接。这种行为成为元素的默认行为，类似的还有鼠标右键点击出现一个菜单

```javascript
let baidu = document.getElementById('baidu');

// 给 a 标签绑定一个点击事件
baidu.onclick = function (e) {
  console.log('123344');
  // e.preventDefault(); // 阻止默认行为，阻止默认行为后，a 标签被点击时就不会再跳转了。
  // return false; // return false 也可以阻止默认行为

  // IE 阻止默认行为
  // e.returnValue = false;
};
// 我们发现 a 标签被点击时照样会跳走，而且 '123344' 会输出出来。说明它默认行为还在，我们绑的事件也生效；

document.oncontextmenu = function (e) {
  e.preventDefault(); // 阻止了鼠标右键的默认行为，在页面中单击鼠标右键时，系统默认菜单不会再弹出
};
```

### 事件传播 事件冒泡

事件冒泡：我们点击一个元素，这个元素的父级的点击事件乃至整个文档顶端的 document 的点击事件都会依次触发，这种从低层级的 html 元素象高层级触发事件的现象称为事件冒泡

事件触发一共有三个阶段：捕获阶段、目标阶段、冒泡阶段；从最外层元素找到事件源的过程称为捕获阶段，在捕获的过程中，如果经过的元素有绑定有该事件，也会被触发；在事件目标（事件源）触发事件后，开始向上冒泡，依次触发父级元素的该事件；
取消冒泡：e.stopPropagation() 阻止事件冒泡；
IE 的阻止冒泡：e.cancelBubble = true;

### onload 和 DOMContentLoaded

window.onload 页面中所有的资源（css、js、图片、字体）全部加载完成后，才会触发；

```javascript
// DOM0 级事件：
window.onload = function () {
  console.log('window onload');
};
```

DOMContentLoaded 页面中的DOM结构加载解析完成后就会触发；（DOM2级事件）

```javascript
// DOM2 级事件绑定
document.addEventListener('DOMContentLoaded', function () {
  console.log('DOM Content Loaded');
}, false);
```

DOMContentLoaded 触发早于 window.onload 

```javascript
// 以后经常会见到这样写的代码：
document.addEventListener('DOMContentLoaded', function () {
  // 在这里面写了很多的业务逻辑，表示页面中的 DOM 结构加载完成后再执行这个回调函数中的代码；
  // 因为 JS 是用来操作 DOM 的，这样写是保证 DOM 结构加载解析完成，再操作 DOM 更安全；
}, false);
```

## 事件委托

 事件委托：当遇到对一个元素中的所有子元素绑定相同的事件，并且事件触发时做的事情一样；利用事件的冒泡机制，我们把事件绑定给父元素（一般绑定给父元素，也可以绑定给更高的元素），然后根据事件触发时 事件源 e.target 判断你点击的到底是哪个元素；事件委托的性能比循环绑定的性能好

## 表单提交

```javascript


// 不使用ajax向服务器发送数据，会用到表单提交
form.onsubmit = function (e) {
  console.log('SUBMIT');
  e.preventDefault(); // 表单提交有默认跳转的默认行为，阻止后就不会跳了
}

```

https://www.yuque.com/u194232/ix06cc/mgln3y