```javascript
// 盒子模型属性不仅可以获取，还可设置

// 写一个方法获取浏览器可视窗口的盒子模型属性
function win(attr, val) {
  if (typeof val === 'undefined') {
    // 如果 val 是 undefined，证明第二个参数没传，没传就是获取
    return document.documentElement[attr] || document.body[attr] // 如果函数法返回值是表达式，它会等着表达式求值，把求出来的值作为返回值返回
  }
  document.documentElement[attr] = document.body[attr] = val;
}
console.log(win('clientWidth'));
console.log(win('scrollTop'));

// 因为除了获取盒子模型属性，我们还有设置盒子模型属性的需要；所以改造 win 方法，传一个参数是获取，传两个参数是设置
```

```javascript
// offset 方法：获取当前元素在页面中相对于 body 的左上角的坐标
let box = document.getElementById('box');

function offset(ele) {
  let left = ele.offsetLeft; // 当前元素的 offsetLeft
  let top = ele.offsetTop; // 当前元素的 offsetTop
  let parent = ele.offsetParent; // 获取当前元素的 offsetParent
  while (parent && parent.nodeName !== 'BODY') {
    left += parent.clientLeft + parent.offsetLeft;
    top += parent.clientTop + parent.offsetTop;
    parent = parent.offsetParent;
  }
  return {
    left, top
  }
}
console.log(offset(box)); // {left: xxx, top: xxx}
```

```javascript
// win 方法
// 获取或者设置浏览器的窗口的盒模型属性：
let winW = document.documentElement.clientWidth || document.body.clientWidth;
let winH = document.documentElement.clientHeight || document.body.clientHeight;

function win(attr, val) {
	if (typeof val !== "undefined") {
		// 传2个值的时候是设置，传一个值是获取
		document.documentElement[attr] = document.body[attr] = val;
	}
	return document.documentElement[attr] || document.body[attr];
}
console.log(win('scrollTop'));
console.log(win('screenTop', 1000));

```

```javascript
// 封装一个 getCss 方法，获取元素计算生效后样式
var box = document.getElementById('box');

function getCss(ele, attr) {
  var value;
  // 1. 判断是否是 IE 浏览器
  if ('getComputedStyle' in window) { // 判断 window 对象上有 getComputedStyle 吗
    value = window.getComputedStyle(ele, null)[attr];
  } else {
    // 执行 else 的时候说明是 IE 低版本，使用 currentStyle 属性
    value = ele.currentStyle[attr];
  }
  // 把单位去掉：把数字且带单位的，把单位去掉
  var reg = /^-?\d+(\.\d+)?px|rem|em|pt$/g;
  if (reg.test(value)) {
    value = parseFloat(value);
  }
  return value
}

console.log(getCss(box, 'width')); // 300px -> 300
console.log(getCss(box, 'height')); // 300px -> 300
console.log(getCss(box, 'opacity'));

// 优化点：
// 1. 要把px单位去掉

// window.getComputedStyle(box, null).backgroundColor = 'red'; 报错，不能修改计算生效的样式
```

